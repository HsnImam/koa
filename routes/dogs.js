const request = require('request-promise');
const Promise = require('bluebird');

module.exports = ({
    dogRouter
}) => {
    // getting the dogs route
    dogRouter.get('/', async (ctx, next) => {
        // let result = await request.get('https://dog.ceo/api/breeds/list/all');
        // ctx.body = result.message;
        let data = {"navigation_categories":[{"title":"Development","id":288,"type":"category","children":[{"title":"Web Development","id":8,"type":"subcategory","children":null,"absolute_url":"/courses/development/web-development/","icon_name":"web-development","title_cleaned":"web-development"},{"title":"Mobile Apps","id":10,"type":"subcategory","children":null,"absolute_url":"/courses/development/mobile-apps/","icon_name":"mobile-apps","title_cleaned":"mobile-apps"},{"title":"Programming Languages","id":12,"type":"subcategory","children":null,"absolute_url":"/courses/development/programming-languages/","icon_name":"programming-languages","title_cleaned":"programming-languages"},{"title":"Game Development","id":14,"type":"subcategory","children":null,"absolute_url":"/courses/development/game-development/","icon_name":"game-development","title_cleaned":"game-development"},{"title":"Databases","id":16,"type":"subcategory","children":null,"absolute_url":"/courses/development/databases/","icon_name":"databases","title_cleaned":"databases"},{"title":"Software Testing","id":18,"type":"subcategory","children":null,"absolute_url":"/courses/development/software-testing/","icon_name":"software-testing","title_cleaned":"software-testing"},{"title":"Software Engineering","id":20,"type":"subcategory","children":null,"absolute_url":"/courses/development/software-engineering/","icon_name":"software-engineering","title_cleaned":"software-engineering"},{"title":"Development Tools","id":362,"type":"subcategory","children":null,"absolute_url":"/courses/development/development-tools/","icon_name":"development-tools","title_cleaned":"development-tools"},{"title":"E-Commerce","id":354,"type":"subcategory","children":null,"absolute_url":"/courses/development/e-commerce/","icon_name":"e-commerce","title_cleaned":"e-commerce"}],"absolute_url":"/courses/development/","icon_name":"development","title_cleaned":"development"},{"title":"Business","id":268,"type":"category","children":[{"title":"Finance","id":24,"type":"subcategory","children":null,"absolute_url":"/courses/business/finance-courses/","icon_name":"finance","title_cleaned":"finance-courses"},{"title":"Entrepreneurship","id":26,"type":"subcategory","children":null,"absolute_url":"/courses/business/entrepreneurship/","icon_name":"entrepreneurship","title_cleaned":"entrepreneurship"},{"title":"Communications","id":28,"type":"subcategory","children":null,"absolute_url":"/courses/business/communications/","icon_name":"communications","title_cleaned":"communications"},{"title":"Management","id":30,"type":"subcategory","children":null,"absolute_url":"/courses/business/management/","icon_name":"management","title_cleaned":"management"},{"title":"Sales","id":32,"type":"subcategory","children":null,"absolute_url":"/courses/business/sales/","icon_name":"sales","title_cleaned":"sales"},{"title":"Strategy","id":34,"type":"subcategory","children":null,"absolute_url":"/courses/business/strategy/","icon_name":"strategy","title_cleaned":"strategy"},{"title":"Operations","id":36,"type":"subcategory","children":null,"absolute_url":"/courses/business/operations/","icon_name":"operations","title_cleaned":"operations"},{"title":"Project Management","id":38,"type":"subcategory","children":null,"absolute_url":"/courses/business/project-management/","icon_name":"project-management","title_cleaned":"project-management"},{"title":"Business Law","id":40,"type":"subcategory","children":null,"absolute_url":"/courses/business/business-law/","icon_name":"business-law","title_cleaned":"business-law"},{"title":"Data & Analytics","id":44,"type":"subcategory","children":null,"absolute_url":"/courses/business/data-and-analytics/","icon_name":"data-and-analytics","title_cleaned":"data-and-analytics"},{"title":"Home Business","id":46,"type":"subcategory","children":null,"absolute_url":"/courses/business/home-business/","icon_name":"home-business","title_cleaned":"home-business"},{"title":"Human Resources","id":48,"type":"subcategory","children":null,"absolute_url":"/courses/business/human-resources/","icon_name":"human-resources","title_cleaned":"human-resources"},{"title":"Industry","id":50,"type":"subcategory","children":null,"absolute_url":"/courses/business/industry/","icon_name":"industry","title_cleaned":"industry"},{"title":"Media","id":52,"type":"subcategory","children":null,"absolute_url":"/courses/business/media/","icon_name":"media","title_cleaned":"media"},{"title":"Real Estate","id":58,"type":"subcategory","children":null,"absolute_url":"/courses/business/real-estate/","icon_name":"real-estate","title_cleaned":"real-estate"},{"title":"Other","id":60,"type":"subcategory","children":null,"absolute_url":"/courses/business/other-business/","icon_name":"line-star","title_cleaned":"other-business"}],"absolute_url":"/courses/business/","icon_name":"business","title_cleaned":"business"},{"title":"Finance & Accounting","id":328,"type":"category","children":[{"title":"Accounting & Bookkeeping","id":530,"type":"subcategory","children":null,"absolute_url":"/courses/finance-and-accounting/accounting-bookkeeping/","icon_name":"sales","title_cleaned":"accounting-bookkeeping"},{"title":"Compliance","id":532,"type":"subcategory","children":null,"absolute_url":"/courses/finance-and-accounting/compliance/","icon_name":"it-certification","title_cleaned":"compliance"},{"title":"Cryptocurrency & Blockchain","id":534,"type":"subcategory","children":null,"absolute_url":"/courses/finance-and-accounting/cryptocurrency-and-blockchain/","icon_name":"cryptocurrency-and-blockchain","title_cleaned":"cryptocurrency-and-blockchain"},{"title":"Economics","id":536,"type":"subcategory","children":null,"absolute_url":"/courses/finance-and-accounting/economics/","icon_name":"productivity","title_cleaned":"economics"},{"title":"Finance","id":540,"type":"subcategory","children":null,"absolute_url":"/courses/finance-and-accounting/finance-management/","icon_name":"personal-finance","title_cleaned":"finance-management"},{"title":"Finance Cert & Exam Prep","id":542,"type":"subcategory","children":null,"absolute_url":"/courses/finance-and-accounting/finance-certification-and-exam-prep/","icon_name":"test-prep","title_cleaned":"finance-certification-and-exam-prep"},{"title":"Financial Modeling & Analysis","id":544,"type":"subcategory","children":null,"absolute_url":"/courses/finance-and-accounting/financial-modeling-and-analysis/","icon_name":"analytics-and-automation","title_cleaned":"financial-modeling-and-analysis"},{"title":"Investing & Trading","id":546,"type":"subcategory","children":null,"absolute_url":"/courses/finance-and-accounting/investing-and-trading/","icon_name":"investing-and-trading","title_cleaned":"investing-and-trading"},{"title":"Money Management Tools","id":548,"type":"subcategory","children":null,"absolute_url":"/courses/finance-and-accounting/money-management-tools/","icon_name":"money-management-tools","title_cleaned":"money-management-tools"},{"title":"Taxes","id":550,"type":"subcategory","children":null,"absolute_url":"/courses/finance-and-accounting/taxes/","icon_name":"office-productivity","title_cleaned":"taxes"},{"title":"Other Finance & Economics","id":552,"type":"subcategory","children":null,"absolute_url":"/courses/finance-and-accounting/other-finance-and-accounting/","icon_name":"finance","title_cleaned":"other-finance-and-accounting"}],"absolute_url":"/courses/finance-and-accounting/","icon_name":"finance","title_cleaned":"finance-and-accounting"},{"title":"IT & Software","id":294,"type":"category","children":[{"title":"IT Certification","id":132,"type":"subcategory","children":null,"absolute_url":"/courses/it-and-software/it-certification/","icon_name":"it-certification","title_cleaned":"it-certification"},{"title":"Network & Security","id":134,"type":"subcategory","children":null,"absolute_url":"/courses/it-and-software/network-and-security/","icon_name":"network-and-security","title_cleaned":"network-and-security"},{"title":"Hardware","id":136,"type":"subcategory","children":null,"absolute_url":"/courses/it-and-software/hardware/","icon_name":"hardware","title_cleaned":"hardware"},{"title":"Operating Systems","id":138,"type":"subcategory","children":null,"absolute_url":"/courses/it-and-software/operating-systems/","icon_name":"operating-systems","title_cleaned":"operating-systems"},{"title":"Other","id":140,"type":"subcategory","children":null,"absolute_url":"/courses/it-and-software/other-it-and-software/","icon_name":"line-star","title_cleaned":"other-it-and-software"}],"absolute_url":"/courses/it-and-software/","icon_name":"it-and-software","title_cleaned":"it-and-software"},{"title":"Office Productivity","id":292,"type":"category","children":[{"title":"Microsoft","id":96,"type":"subcategory","children":null,"absolute_url":"/courses/office-productivity/microsoft/","icon_name":"microsoft","title_cleaned":"microsoft"},{"title":"Apple","id":98,"type":"subcategory","children":null,"absolute_url":"/courses/office-productivity/apple/","icon_name":"apple","title_cleaned":"apple"},{"title":"Google","id":100,"type":"subcategory","children":null,"absolute_url":"/courses/office-productivity/google/","icon_name":"google","title_cleaned":"google"},{"title":"SAP","id":102,"type":"subcategory","children":null,"absolute_url":"/courses/office-productivity/sap/","icon_name":"sap","title_cleaned":"sap"},{"title":"Oracle","id":106,"type":"subcategory","children":null,"absolute_url":"/courses/office-productivity/oracle/","icon_name":"oracle","title_cleaned":"oracle"},{"title":"Other","id":108,"type":"subcategory","children":null,"absolute_url":"/courses/office-productivity/other-productivity/","icon_name":"line-star","title_cleaned":"other-productivity"}],"absolute_url":"/courses/office-productivity/","icon_name":"office-productivity","title_cleaned":"office-productivity"},{"title":"Personal Development","id":296,"type":"category","children":[{"title":"Personal Transformation","id":142,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/personal-transformation/","icon_name":"personal-transformation","title_cleaned":"personal-transformation"},{"title":"Productivity","id":144,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/productivity/","icon_name":"productivity","title_cleaned":"productivity"},{"title":"Leadership","id":146,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/leadership/","icon_name":"leadership","title_cleaned":"leadership"},{"title":"Personal Finance","id":148,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/personal-finance/","icon_name":"personal-finance","title_cleaned":"personal-finance"},{"title":"Career Development","id":150,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/career-development/","icon_name":"career-development","title_cleaned":"career-development"},{"title":"Parenting & Relationships","id":152,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/parenting-and-relationships/","icon_name":"parenting-and-relationships","title_cleaned":"parenting-and-relationships"},{"title":"Happiness","id":156,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/happiness/","icon_name":"happiness","title_cleaned":"happiness"},{"title":"Religion & Spirituality","id":158,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/religion-and-spirituality/","icon_name":"religion-and-spirituality","title_cleaned":"religion-and-spirituality"},{"title":"Personal Brand Building","id":160,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/personal-brand-building/","icon_name":"personal-brand-building","title_cleaned":"personal-brand-building"},{"title":"Creativity","id":164,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/creativity/","icon_name":"creativity","title_cleaned":"creativity"},{"title":"Influence","id":166,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/influence/","icon_name":"influence","title_cleaned":"influence"},{"title":"Self Esteem","id":168,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/self-esteem/","icon_name":"self-esteem","title_cleaned":"self-esteem"},{"title":"Stress Management","id":170,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/stress-management/","icon_name":"stress-management","title_cleaned":"stress-management"},{"title":"Memory & Study Skills","id":172,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/memory/","icon_name":"memory","title_cleaned":"memory"},{"title":"Motivation","id":176,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/motivation/","icon_name":"motivation","title_cleaned":"motivation"},{"title":"Other","id":178,"type":"subcategory","children":null,"absolute_url":"/courses/personal-development/other-personal-development/","icon_name":"line-star","title_cleaned":"other-personal-development"}],"absolute_url":"/courses/personal-development/","icon_name":"personal-development","title_cleaned":"personal-development"},{"title":"Design","id":269,"type":"category","children":[{"title":"Web Design","id":6,"type":"subcategory","children":null,"absolute_url":"/courses/design/web-design/","icon_name":"web-design","title_cleaned":"web-design"},{"title":"Graphic Design","id":110,"type":"subcategory","children":null,"absolute_url":"/courses/design/graphic-design/","icon_name":"graphic-design","title_cleaned":"graphic-design"},{"title":"Design Tools","id":112,"type":"subcategory","children":null,"absolute_url":"/courses/design/design-tools/","icon_name":"design-tools","title_cleaned":"design-tools"},{"title":"User Experience","id":114,"type":"subcategory","children":null,"absolute_url":"/courses/design/user-experience/","icon_name":"user-experience","title_cleaned":"user-experience"},{"title":"Game Design","id":116,"type":"subcategory","children":null,"absolute_url":"/courses/design/game-design/","icon_name":"game-design","title_cleaned":"game-design"},{"title":"Design Thinking","id":118,"type":"subcategory","children":null,"absolute_url":"/courses/design/design-thinking/","icon_name":"design-thinking","title_cleaned":"design-thinking"},{"title":"3D & Animation","id":120,"type":"subcategory","children":null,"absolute_url":"/courses/design/3d-and-animation/","icon_name":"3d-and-animation","title_cleaned":"3d-and-animation"},{"title":"Fashion","id":122,"type":"subcategory","children":null,"absolute_url":"/courses/design/fashion/","icon_name":"fashion","title_cleaned":"fashion"},{"title":"Architectural Design","id":124,"type":"subcategory","children":null,"absolute_url":"/courses/design/architectural-design/","icon_name":"architectural-design","title_cleaned":"architectural-design"},{"title":"Interior Design","id":128,"type":"subcategory","children":null,"absolute_url":"/courses/design/interior-design/","icon_name":"interior-design","title_cleaned":"interior-design"},{"title":"Other","id":130,"type":"subcategory","children":null,"absolute_url":"/courses/design/other-design/","icon_name":"line-star","title_cleaned":"other-design"}],"absolute_url":"/courses/design/","icon_name":"design","title_cleaned":"design"},{"title":"Marketing","id":290,"type":"category","children":[{"title":"Digital Marketing","id":62,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/digital-marketing/","icon_name":"digital-marketing","title_cleaned":"digital-marketing"},{"title":"Search Engine Optimization","id":64,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/search-engine-optimization/","icon_name":"search-engine-optimization","title_cleaned":"search-engine-optimization"},{"title":"Social Media Marketing","id":66,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/social-media-marketing/","icon_name":"social-media-marketing","title_cleaned":"social-media-marketing"},{"title":"Branding","id":68,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/branding/","icon_name":"branding","title_cleaned":"branding"},{"title":"Marketing Fundamentals","id":70,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/marketing-fundamentals/","icon_name":"marketing-fundamentals","title_cleaned":"marketing-fundamentals"},{"title":"Analytics & Automation","id":72,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/analytics-and-automation/","icon_name":"analytics-and-automation","title_cleaned":"analytics-and-automation"},{"title":"Public Relations","id":74,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/public-relations/","icon_name":"public-relations","title_cleaned":"public-relations"},{"title":"Advertising","id":76,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/advertising/","icon_name":"advertising","title_cleaned":"advertising"},{"title":"Video & Mobile Marketing","id":78,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/video-and-mobile-marketing/","icon_name":"video-and-mobile-marketing","title_cleaned":"video-and-mobile-marketing"},{"title":"Content Marketing","id":80,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/content-marketing/","icon_name":"content-marketing","title_cleaned":"content-marketing"},{"title":"Growth Hacking","id":86,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/growth-hacking/","icon_name":"growth-hacking","title_cleaned":"growth-hacking"},{"title":"Affiliate Marketing","id":88,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/affiliate-marketing/","icon_name":"affiliate-marketing","title_cleaned":"affiliate-marketing"},{"title":"Product Marketing","id":90,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/product-marketing/","icon_name":"product-marketing","title_cleaned":"product-marketing"},{"title":"Other","id":94,"type":"subcategory","children":null,"absolute_url":"/courses/marketing/other-marketing/","icon_name":"line-star","title_cleaned":"other-marketing"}],"absolute_url":"/courses/marketing/","icon_name":"marketing","title_cleaned":"marketing"},{"title":"Lifestyle","id":274,"type":"category","children":[{"title":"Arts & Crafts","id":180,"type":"subcategory","children":null,"absolute_url":"/courses/lifestyle/arts-and-crafts/","icon_name":"arts-and-crafts","title_cleaned":"arts-and-crafts"},{"title":"Food & Beverage","id":182,"type":"subcategory","children":null,"absolute_url":"/courses/lifestyle/food-and-beverage/","icon_name":"food-and-beverage","title_cleaned":"food-and-beverage"},{"title":"Beauty & Makeup","id":184,"type":"subcategory","children":null,"absolute_url":"/courses/lifestyle/beauty-and-makeup/","icon_name":"beauty-and-makeup","title_cleaned":"beauty-and-makeup"},{"title":"Travel","id":186,"type":"subcategory","children":null,"absolute_url":"/courses/lifestyle/travel/","icon_name":"travel","title_cleaned":"travel"},{"title":"Gaming","id":188,"type":"subcategory","children":null,"absolute_url":"/courses/lifestyle/gaming/","icon_name":"gaming","title_cleaned":"gaming"},{"title":"Home Improvement","id":190,"type":"subcategory","children":null,"absolute_url":"/courses/lifestyle/home-improvement/","icon_name":"home-improvement","title_cleaned":"home-improvement"},{"title":"Pet Care & Training","id":192,"type":"subcategory","children":null,"absolute_url":"/courses/lifestyle/pet-care-and-training/","icon_name":"pet-care-and-training","title_cleaned":"pet-care-and-training"},{"title":"Other","id":194,"type":"subcategory","children":null,"absolute_url":"/courses/lifestyle/other-lifestyle/","icon_name":"line-star","title_cleaned":"other-lifestyle"}],"absolute_url":"/courses/lifestyle/","icon_name":"lifestyle","title_cleaned":"lifestyle"},{"title":"Photography","id":273,"type":"category","children":[{"title":"Digital Photography","id":370,"type":"subcategory","children":null,"absolute_url":"/courses/photography/digital-photography/","icon_name":"digital-photography","title_cleaned":"digital-photography"},{"title":"Photography Fundamentals","id":196,"type":"subcategory","children":null,"absolute_url":"/courses/photography/photography-fundamentals/","icon_name":"photography-fundamentals","title_cleaned":"photography-fundamentals"},{"title":"Portraits","id":204,"type":"subcategory","children":null,"absolute_url":"/courses/photography/portraits/","icon_name":"portraits","title_cleaned":"portraits"},{"title":"Photography Tools","id":198,"type":"subcategory","children":null,"absolute_url":"/courses/photography/photography-tools/","icon_name":"photography-tools","title_cleaned":"photography-tools"},{"title":"Commercial Photography","id":208,"type":"subcategory","children":null,"absolute_url":"/courses/photography/commercial-photography/","icon_name":"commercial-photography","title_cleaned":"commercial-photography"},{"title":"Video Design","id":218,"type":"subcategory","children":null,"absolute_url":"/courses/photography/video-design/","icon_name":"video-design","title_cleaned":"video-design"},{"title":"Other","id":220,"type":"subcategory","children":null,"absolute_url":"/courses/photography/other-photography/","icon_name":"line-star","title_cleaned":"other-photography"}],"absolute_url":"/courses/photography/","icon_name":"photography","title_cleaned":"photography"},{"title":"Health & Fitness","id":276,"type":"category","children":[{"title":"Fitness","id":222,"type":"subcategory","children":null,"absolute_url":"/courses/health-and-fitness/fitness/","icon_name":"fitness","title_cleaned":"fitness"},{"title":"General Health","id":224,"type":"subcategory","children":null,"absolute_url":"/courses/health-and-fitness/general-health/","icon_name":"general-health","title_cleaned":"general-health"},{"title":"Sports","id":226,"type":"subcategory","children":null,"absolute_url":"/courses/health-and-fitness/sports/","icon_name":"sports","title_cleaned":"sports"},{"title":"Nutrition","id":228,"type":"subcategory","children":null,"absolute_url":"/courses/health-and-fitness/nutrition/","icon_name":"nutrition","title_cleaned":"nutrition"},{"title":"Yoga","id":230,"type":"subcategory","children":null,"absolute_url":"/courses/health-and-fitness/yoga/","icon_name":"yoga","title_cleaned":"yoga"},{"title":"Mental Health","id":232,"type":"subcategory","children":null,"absolute_url":"/courses/health-and-fitness/mental-health/","icon_name":"mental-health","title_cleaned":"mental-health"},{"title":"Dieting","id":234,"type":"subcategory","children":null,"absolute_url":"/courses/health-and-fitness/dieting/","icon_name":"dieting","title_cleaned":"dieting"},{"title":"Self Defense","id":236,"type":"subcategory","children":null,"absolute_url":"/courses/health-and-fitness/self-defense/","icon_name":"self-defense","title_cleaned":"self-defense"},{"title":"Safety & First Aid","id":238,"type":"subcategory","children":null,"absolute_url":"/courses/health-and-fitness/safety-and-first-aid/","icon_name":"safety-and-first-aid","title_cleaned":"safety-and-first-aid"},{"title":"Dance","id":240,"type":"subcategory","children":null,"absolute_url":"/courses/health-and-fitness/dance/","icon_name":"dance","title_cleaned":"dance"},{"title":"Meditation","id":242,"type":"subcategory","children":null,"absolute_url":"/courses/health-and-fitness/meditation/","icon_name":"meditation","title_cleaned":"meditation"},{"title":"Other","id":244,"type":"subcategory","children":null,"absolute_url":"/courses/health-and-fitness/other-health-and-fitness/","icon_name":"line-star","title_cleaned":"other-health-and-fitness"}],"absolute_url":"/courses/health-and-fitness/","icon_name":"health-and-fitness","title_cleaned":"health-and-fitness"},{"title":"Music","id":278,"type":"category","children":[{"title":"Instruments","id":296,"type":"subcategory","children":null,"absolute_url":"/courses/music/instruments/","icon_name":"instruments","title_cleaned":"instruments"},{"title":"Production","id":298,"type":"subcategory","children":null,"absolute_url":"/courses/music/production/","icon_name":"production","title_cleaned":"production"},{"title":"Music Fundamentals","id":300,"type":"subcategory","children":null,"absolute_url":"/courses/music/music-fundamentals/","icon_name":"music-fundamentals","title_cleaned":"music-fundamentals"},{"title":"Vocal","id":302,"type":"subcategory","children":null,"absolute_url":"/courses/music/vocal/","icon_name":"vocal","title_cleaned":"vocal"},{"title":"Music Techniques","id":304,"type":"subcategory","children":null,"absolute_url":"/courses/music/music-techniques/","icon_name":"music-techniques","title_cleaned":"music-techniques"},{"title":"Music Software","id":306,"type":"subcategory","children":null,"absolute_url":"/courses/music/music-software/","icon_name":"music-software","title_cleaned":"music-software"},{"title":"Other","id":308,"type":"subcategory","children":null,"absolute_url":"/courses/music/other-music/","icon_name":"line-star","title_cleaned":"other-music"}],"absolute_url":"/courses/music/","icon_name":"music","title_cleaned":"music"},{"title":"Teaching & Academics","id":300,"type":"category","children":[{"title":"Engineering","id":366,"type":"subcategory","children":null,"absolute_url":"/courses/teaching-and-academics/engineering/","icon_name":"development-tools","title_cleaned":"engineering"},{"title":"Humanities","id":380,"type":"subcategory","children":null,"absolute_url":"/courses/teaching-and-academics/humanities/","icon_name":"humanities","title_cleaned":"humanities"},{"title":"Math","id":310,"type":"subcategory","children":null,"absolute_url":"/courses/teaching-and-academics/math/","icon_name":"educational-development","title_cleaned":"math"},{"title":"Science","id":312,"type":"subcategory","children":null,"absolute_url":"/courses/teaching-and-academics/science/","icon_name":"math-and-science","title_cleaned":"science"},{"title":"Online Education","id":523,"type":"subcategory","children":null,"absolute_url":"/courses/teaching-and-academics/online-education/","icon_name":"instructional-design","title_cleaned":"online-education"},{"title":"Social Science","id":376,"type":"subcategory","children":null,"absolute_url":"/courses/teaching-and-academics/social-science/","icon_name":"social-science","title_cleaned":"social-science"},{"title":"Language","id":521,"type":"subcategory","children":null,"absolute_url":"/courses/teaching-and-academics/language/","icon_name":"language","title_cleaned":"language"},{"title":"Teacher Training","id":527,"type":"subcategory","children":null,"absolute_url":"/courses/teaching-and-academics/teacher-training/","icon_name":"teacher-training","title_cleaned":"teacher-training"},{"title":"Test Prep","id":529,"type":"subcategory","children":null,"absolute_url":"/courses/teaching-and-academics/test-prep/","icon_name":"test-prep","title_cleaned":"test-prep"},{"title":"Other Teaching & Academics","id":525,"type":"subcategory","children":null,"absolute_url":"/courses/teaching-and-academics/other-teaching-academics/","icon_name":"academics","title_cleaned":"other-teaching-academics"}],"absolute_url":"/courses/teaching-and-academics/","icon_name":"academics","title_cleaned":"teaching-and-academics"}],"organization_categories":[]}
        let output = [];
        let result = data.navigation_categories.reduce((r,o) => {
            r.push(o.id);
            output.push(o.title)
            o.children.forEach(({id, title}) => {
                r.push(id);
                output.push(title);
            });
            return r;
        }, []).sort((a,b) => a - b).slice(100, 146);

        result = [244, 268, 294, 296, 296, 298, 300, 300, 302, 304, 306, 308, 310, 312, 328, 354, 362, 366, 370, 376, 380, 521, 523, 525, 527, 529, 530, 532, 534, 536, 540, 542, 544, 546, 548, 550, 552];
        console.log(result);
        await Promise.each(result, async (id) => {
            console.log(id);
            try {
                let data = await request.get(`https://www.udemy.com/api-2.0/course-subcategories/${id}/labels?page_size=9`);
                data = JSON.parse(data);
                output = output.concat(data.results.map(({display_name}) => display_name));
            } catch(ex) {
                console.log(ex);
            }
        });
        
        ctx.body = {
            output
        }
        
    });
};